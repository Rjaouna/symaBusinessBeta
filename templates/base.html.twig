<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js'></script>

        
        <!-- Icône de la page -->
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        
        <!-- Lien vers la bibliothèque Bootstrap Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">

        {% block stylesheets %}
        <!-- Lien vers la feuille de style Bootstrap -->
        <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}">
        <!-- Table jQuery -->
        <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
        {% endblock %}
        
        {% block javascripts %}

        <!-- Scripts nécessaires pour le fonctionnement de Bootstrap -->
        <script src="{{ asset('assets/js/bootstrap.bundle.min.js') }}" data-manual=""></script>
        <!-- Script personnalisé -->
        <script src="{{ asset('assets/js/custom.js') }}" data-manual=""></script>
        <!-- Prism.js (peut-être pour la coloration syntaxique) -->
        <script src="{{ asset('assets/js/prism.js') }}" data-manual=""></script>
        {# Inclure le js pour les graphes #}
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <!-- Import d'Axios depuis un CDN -->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        {# API User information pour le left wideget #}
        <script  type="module" src="{{ asset('assets/js/api/commandeInformations.js') }}" ></script>
        {# Initialisation de dataTable #}
        <script  type="module" src="{{ asset('assets/js/dataTableInit.js') }}" defer></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
        

        {% endblock %}
    </head>
    
    <body>
        <!-- Inclusion du fichier de navigation -->
        {{ include('_nav/_nav.html.twig') }}
        
        <div class="container-fluid mt-3">
            <div class="row">
                
                <!-- Sidebar gauche, affichée seulement si l'utilisateur est connecté -->
                {% if app.user %}
                    <div class="col-md-2 left-align">
                        {% block left_sidebar %}
                            {{ include(('_Sidebars/_left/userInformations.html.twig')) }}
                            {% if app.user.quotas %}
                            {{ include(('_Sidebars/_left/quotaInformations.html.twig')) }}
                            {{ include(('_Sidebars/_left/formCommandes.html.twig')) }}
                            {% endif %}
                            {# {{ include(('_Sidebars/_left/_user_informations.html.twig')) }} #}
                        {% endblock %}
                    </div>
                {% endif %}
                
                <!-- Contenu principal -->
                {% if app.user %}
                    <div class="col-md-7 left-align  mb-5">
                    <!-- Inclusion du header ou bannière -->
                    {{ include(('_Sidebars/_banner/_header.html.twig')) }}
                    
                    <!-- Affichage des messages flash -->
                    {% for label, messages in app.flashes %}
                        <div class="alert alert-{{ label }}   px-2 rounded shadow-sm mx-2">
                            {% for message in messages %}
                                {{ message | raw }}
                            {% endfor %}
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="col-md-12 left-align mb-5">
                {% endif %}
                    
                    
                    
                    <!-- Section pour le contenu du corps -->
                    {% block body %}{% endblock %}
                </div>
                
                <!-- Sidebar droite, affichée seulement si l'utilisateur est connecté -->
                {% if app.user %}
                    <div class="col-md-3 left-align">
                        {% block right_sidebar %}
                            {{ include(('_Sidebars/right/statistics.html.twig')) }}
                        {% endblock %}
                    </div>
                {% endif %}
            </div>
        </div>
    </body>
</html>
